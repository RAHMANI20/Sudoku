CFLAGS = -std=c11 -Wall -Wextra -g -O3
CPPFLAGS = -I../include -DDEBUG
LDFLAGS = -lm
PAPER = ../report/report.tex
CIBLE = ../report

all : sudoku

sudoku : sudoku.o colors.o grid.o   
	$(CC) $(CFLAGS) -o $@ $^ $(LDFLAGS)

sudoku.o : sudoku.c sudoku.h ../include/grid.h
	$(CC) $(CFLAGS) $(CPPFLAGS) -c $<

color.o : colors.c ../include/colors.h
	$(CC) $(CFLAGS) $(CPPFLAGS) -c $<

grid.o : grid.c ../include/grid.h ../include/colors.h
	$(CC) $(CFLAGS) $(CPPFLAGS) -c $<

report :
	pdflatex -output-directory $(CIBLE) $(PAPER)
	pdflatex -output-directory $(CIBLE) $(PAPER) 
         	
clean :
	rm -f *.o sudoku
	rm -f $(CIBLE)/*.toc $(CIBLE)/*.log $(CIBLE)/*.pdf $(CIBLE)/*.aux

help:
	@echo "Usage:"
	@echo " make [all]\t\tBuild the software"
	@echo " make clean\t\tRemove all files generated by make"
	@echo " make help\t\tDisplay this help"	

.PHONY: all report clean help
